{"version":3,"sources":["thumbnailing/pdf.js"],"names":[],"mappings":";;;;;;;;sDAsBO,iBAA+B,IAA/B,EAAqC,SAArC,EAAgD,IAAhD;AAAA,QAYD,IAZC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACC,YAAY,OAAZ,CAAoB,CACxB,UADwB,EAExB,KAFwB,EAGrB,IAHqB,UAIxB,UAJwB,EAKxB,KALwB,EAMxB,SANwB,EAOxB,SAPwB,EAQxB,SARwB,WASjB,SATiB,CAApB,CADD;;AAAA;AAAA;AAAA,mBAYY,YAAY,QAAZ,CAAqB,SAArB,CAZZ;;AAAA;AAYD,gBAZC;AAAA,6CAaE;AACL,+BAAiB;AACf,uBAAO,KAAK,KADG;AAEf,wBAAQ,KAAK;AAFE;AADZ,aAbF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAe,e;;;;;QAhBN,K,GAAA,K;QAIA,qB,GAAA,qB;QAIA,wB,GAAA,wB;QAIA,0B,GAAA,0B;;AAlBhB;;;;AAEA;;IAAY,K;;;;;;;;AAEZ,IAAM,cAAc,6BAAU,aAAV,CAApB;;AAEO,SAAS,KAAT,CAAe,QAAf,EAAyB;AAC9B,SAAO,MAAM,SAAN,CAAgB,QAAhB,CAAP;AACD;;AAEM,SAAS,qBAAT,CAA+B,MAA/B,EAAuC,QAAvC,EAAiD;AACtD,SAAO,UAAU,MAAV,IAAoB,sBAAsB,QAAjD;AACD;;AAEM,SAAS,wBAAT,CAAkC,QAAlC,EAA4C;AACjD,SAAQ,sBAAsB,QAAvB,GAAmC,KAAnC,GAA2C,IAAlD;AACD;;AAEM,SAAS,0BAAT,CAAoC,QAApC,EAA8C;AACnD,SAAQ,sBAAsB,QAAvB,GAAmC,KAAnC,GAA2C,IAAlD;AACD","file":"thumbnailing/pdf.js","sourcesContent":["import promisify from 'promisify-node';\n\nimport * as Tools from '../helpers/tools';\n\nconst ImageMagick = promisify('imagemagick');\n\nexport function match(mimeType) {\n  return Tools.isPdfType(mimeType);\n}\n\nexport function suffixMatchesMimeType(suffix, mimeType) {\n  return 'pdf' === suffix && 'application/pdf' === mimeType;\n}\n\nexport function defaultSuffixForMimeType(mimeType) {\n  return ('application/pdf' === mimeType) ? 'pdf' : null;\n}\n\nexport function thumbnailSuffixForMimeType(mimeType) {\n  return ('application/pdf' === mimeType) ? 'png' : null;\n}\n\nexport async function createThumbnail(file, thumbPath, path) {\n  await ImageMagick.convert([\n    '-density',\n    '300',\n    `${path}[0]`,\n    '-quality',\n    '100',\n    '+adjoin',\n    '-resize',\n    '200x200',\n    `png:${thumbPath}`\n  ]);\n  let info = await ImageMagick.identify(thumbPath);\n  return {\n    thumbDimensions: {\n      width: info.width,\n      height: info.height\n    }\n  };\n}\n"],"sourceRoot":"/source/"}