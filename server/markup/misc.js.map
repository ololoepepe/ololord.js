{"version":3,"sources":["markup/misc.js"],"names":[],"mappings":"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","file":"markup/misc.js","sourcesContent":["import ProcessingContext from './processing-context';\nimport * as Tools from '../helpers/tools';\n\nfunction convertHtml(_1, text, _2, _3, options) {\n  options.type = ProcessingContext.HTML_SKIP;\n  return text;\n}\n\nfunction convertEmDash(_1, _2, _3, _4, options) {\n  options.type = ProcessingContext.NO_SKIP;\n  return '\\u2014';\n}\n\nfunction convertEnDash(_1, _2, _3, _4, options) {\n  options.type = ProcessingContext.NO_SKIP;\n  return '\\u2013';\n}\n\nfunction convertCSpoiler(_1, text, matchs, _2, options) {\n  let title = matchs[1];\n  if (!title) {\n    title = Tools.translate('Spoiler');\n  }\n  options.type = ProcessingContext.NO_SKIP;\n  options.op = \"<span class='collapsible-spoiler'><span class='collapsible-spoiler-title' \"\n    + `title='${Tools.translate('Spoiler')}' onclick='lord.expandCollapseSpoiler(this);'>${title}`\n    + \"</span><span class='collapsible-spoiler-body' style='display: none;'>\";\n  options.cl = '</span></span>';\n  return text;\n}\n\nfunction convertTooltip(_1, text, matchs, _2, options) {\n  let tooltip = matchs[1];\n  options.type = ProcessingContext.NO_SKIP;\n  options.op = `<span class='tooltip js-with-tooltip' title='${tooltip}'>`;\n  options.cl = '</span>';\n  return text;\n}\n\nfunction convertCitation(_1, text, matchs, matche, options) {\n  options.type = ProcessingContext.NO_SKIP;\n  if ('\\n' === matchs[1]) {\n    options.op = '<br />';\n  }\n  options.op += \"<span class='quotation'>&gt;\";\n  options.cl = '</span>';\n  if ('\\n' === matche[0]) {\n    options.cl += '<br />';\n  }\n  return text;\n}\n\nfunction checkCitationNotInterrupted(info, matchs, matche) {\n  if (info.isIn(matchs.index, matche.index - matchs.index)) {\n    return false;\n  }\n  if (0 === matchs.index) {\n    return true;\n  }\n  if ('\\n' === info.text.substr(matchs.index - 1, 1)) {\n    return true;\n  }\n  return info.isIn(matchs.index - 6, 6, ProcessingContext.HTML_SKIP)\n    && (info.text.substr(matchs.index - 6, 6) === '<br />');\n}\n\nexport default [{\n  priority: 600,\n  markupModes: ['BB_CODE'],\n  convert: convertHtml,\n  op: '[raw-html]',\n  cl: '[/raw-html]',\n  permission: 'useRawHTMLMarkup'\n}, {\n  priority: 2400,\n  markupModes: ['EXTENDED_WAKABA_MARK', 'BB_CODE'],\n  convert: convertEmDash,\n  op: '----',\n  cl: null\n}, {\n  priority: 2600,\n  markupModes: ['EXTENDED_WAKABA_MARK', 'BB_CODE'],\n  convert: convertEnDash,\n  op: '--',\n  cl: null\n}, {\n  priority: 4300,\n  markupModes: ['BB_CODE'],\n  convert: convertCSpoiler,\n  op: '[cspoiler]',\n  cl: '[/cspoiler]',\n  nestable: true\n}, {\n  priority: 4400,\n  markupModes: ['BB_CODE'],\n  convert: convertCSpoiler,\n  op: /\\[cspoiler\\s+title\\=\"([^\"]*)\"\\s*\\]/gi,\n  cl: '[/cspoiler]',\n  nestable: true\n}, {\n  priority: 4500,\n  markupModes: ['BB_CODE'],\n  convert: convertTooltip,\n  op: /\\[tooltip\\s+value\\=\"([^\"]*)\"\\s*\\]/gi,\n  cl: '[/tooltip]',\n  nestable: true\n}, {\n  priority: 4900,\n  markupModes: ['EXTENDED_WAKABA_MARK', 'BB_CODE'],\n  convert: convertCitation,\n  op: '>',\n  cl: /\\n|$/gi,\n  check: checkCitationNotInterrupted\n}];\n"],"sourceRoot":"/source/"}