{"version":3,"sources":["markup/tags.js"],"names":["Renderer","Tools","getCSpoilerOP","title","toHTML","translate","TAGS","op","cl","convertTags","_1","text","matchs","_2","options","type","NO_SKIP","tag","priority","markupModes","convert","nestable"],"mappings":"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","file":"tags.js","sourcesContent":["import ProcessingContext from './processing-context';\nimport * as Renderer from '../core/renderer';\nimport * as Tools from '../helpers/tools';\n\nfunction getCSpoilerOP() {\n  let title = Renderer.toHTML(Tools.translate('Spoiler'));\n  return \"<span class='collapsible-spoiler'><span class='collapsible-spoiler-title' \"\n    + `title='${Tools.translate('Spoiler')}' onclick='lord.expandCollapseSpoiler(this);'>${title}`\n    + \"</span><span class='collapsible-spoiler-body' style='display: none;'>\";\n}\n\nconst TAGS = {\n  '---': {\n    op: '<s>',\n    cl: '</s>'\n  },\n  '***': {\n    op: '<u>',\n    cl: '</u>'\n  },\n  '**': {\n    op: '<strong>',\n    cl: '</strong>'\n  },\n  '*': {\n    op: '<em>',\n    cl: '</em>'\n  },\n  '___': {\n    op: '<u>',\n    cl: '</u>'\n  },\n  '__': {\n    op: '<strong>',\n    cl: '</strong>'\n  },\n  '_': {\n    op: '<em>',\n    cl: '</em>'\n  },\n  '///': {\n    op: '<em>',\n    cl: '</em>'\n  },\n  '%%%': {\n    op: getCSpoilerOP,\n    cl: '</span></span>'\n  },\n  '%%': {\n    op: \"<span class='spoiler'>\",\n    cl: '</span>'\n  },\n  '[b]': {\n    op: '<strong>',\n    cl: '</strong>'\n  },\n  '[i]': {\n    op: '<em>',\n    cl: '</em>'\n  },\n  '[s]': {\n    op: '<s>',\n    cl: '</s>'\n  },\n  '[u]': {\n    op: '<u>',\n    cl: '</u>'\n  },\n  '[sub]': {\n    op: '<sub>',\n    cl: '</sub>'\n  },\n  '[sup]': {\n    op: '<sup>',\n    cl: '</sup>'\n  },\n  '[spoiler]': {\n    op: \"<span class='spoiler'>\",\n    cl: '</span>'\n  }\n};\n\nfunction convertTags(_1, text, matchs, _2, options) {\n  options.type = ProcessingContext.NO_SKIP;\n  let tag = TAGS[matchs[0]];\n  if (!tag) {\n    return '';\n  }\n  if (typeof tag.op === 'function') {\n    options.op = tag.op();\n  } else {\n    options.op = tag.op;\n  }\n  options.cl = tag.cl;\n  return text;\n}\n\nexport default [{\n  priority: 2500,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '---'\n}, {\n  priority: 2700,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '***'\n}, {\n  priority: 2800,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '**'\n}, {\n  priority: 2900,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '*'\n}, {\n  priority: 3000,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '___'\n}, {\n  priority: 3100,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '__'\n}, {\n  priority: 3200,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '_'\n}, {\n  priority: 3300,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '///'\n}, {\n  priority: 3400,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '%%%'\n}, {\n  priority: 3500,\n  markupModes: ['EXTENDED_WAKABA_MARK'],\n  convert: convertTags,\n  op: '%%'\n}, {\n  priority: 3600,\n  markupModes: ['BB_CODE'],\n  convert: convertTags,\n  op: '[b]',\n  cl: '[/b]',\n  nestable: true\n}, {\n  priority: 3700,\n  markupModes: ['BB_CODE'],\n  convert: convertTags,\n  op: '[i]',\n  cl: '[/i]',\n  nestable: true\n}, {\n  priority: 3800,\n  markupModes: ['BB_CODE'],\n  convert: convertTags,\n  op: '[s]',\n  cl: '[/s]',\n  nestable: true\n}, {\n  priority: 3900,\n  markupModes: ['BB_CODE'],\n  convert: convertTags,\n  op: \"[u]\",\n  cl: \"[/u]\",\n  nestable: true\n}, {\n  priority: 4000,\n  markupModes: ['BB_CODE'],\n  convert: convertTags,\n  op: '[sub]',\n  cl: '[/sub]',\n  nestable: true\n}, {\n  priority: 4100,\n  markupModes: ['BB_CODE'],\n  convert: convertTags,\n  op: '[sup]',\n  cl: '[/sup]',\n  nestable: true\n}, {\n  priority: 4200,\n  markupModes: ['BB_CODE'],\n  convert: convertTags,\n  op: '[spoiler]',\n  cl: '[/spoiler]',\n  nestable: true\n}];\n"]}