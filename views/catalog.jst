<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
{{#def.head}}
<body class="{{=it.deviceType}}"
      {{#def.baseData}}
      {{? it.lastPostNumber}}data-last-post-number="{{=it.lastPostNumber}}"{{?}}>
{{? it.customHeader}}
    {{#def.customHeader}}
{{?}}
{{~["top", "bottom"] :target}}
    {{#def.navigationButton}}
{{~}}
<a id="top"></a>
{{#def.toolbar}}
<br />
{{#def.searchAction}}
{{? it.board.bannerFileName}}
    <br />
    {{#def.banner}}
{{?}}
<div class="theTitle">
    <h1>
        <a href="/{{=it.site.pathPrefix}}{{=it.board.name}}">{{=it.board.title}}</a>
    </h1>
    {{=it.tr.sortingModeLabelText}}
    {{? it.settings.mode.name != "ascetic"}}
        <select name="catalogSortingModeSelect" class="select"
                onchange="location = '/{{=it.site.pathPrefix}}{{=it.board.name}}/catalog.html?sort=' + this.options[this.selectedIndex].value;">
            <option value="date"
                    {{? it.sortMode == "date"}}selected="true"{{?}}>{{=it.tr.sortingModeDateLabelText}}</option>
            <option value="recent"
                    {{? it.sortMode == "recent"}}selected="true"{{?}}>{{=it.tr.sortingModeRecentLabelText}}</option>
            <option value="bumps"
                    {{? it.sortMode == "bumps"}}selected="true"{{?}}>{{=it.tr.sortingModeBumpsLabelText}}</option>
        </select>
    {{??}}
        <a href="/{{=it.site.pathPrefix}}{{=it.board.name}}/catalog.html?sort=date">{{=it.tr.sortingModeDateLabelText}}</a>
        |
        <a href="/{{=it.site.pathPrefix}}{{=it.board.name}}/catalog.html?sort=recent">{{=it.tr.sortingModeRecentLabelText}}</a>
        |
        <a href="/{{=it.site.pathPrefix}}{{=it.board.name}}/catalog.html?sort=bumps">{{=it.tr.sortingModeBumpsLabelText}}</a>
    {{?}}
</div>
<hr />
<hr />
<div class="catalogContainer">
    {{~it.threads :thread}}
        <div class="catalogItem">
            <div>
                <a href="/{{=it.site.pathPrefix}}{{=it.board.name}}/res/{{=thread.opPost.number}}.html">
                    {{? thread.opPost.fileInfos.length > 0}}
                        {{~[thread.opPost.fileInfos[0]] :fileInfo}}
                            {{#def.postFileThumb}} 
                        {{~}}
                    {{??}}
                        &gt;&gt;/{{=it.board.name}}/{{=thread.opPost.number}}
                    {{?}}
                </a>
            </div>
            {{~[thread.opPost] :post}}
                <div>
                    {{#def.postName}}
                    {{=it.tr.replyCountLabelText}} {{ out += (thread.postCount - 1); }}
                    {{? post.subject}}
                        <br />
                    {{?}}
                    {{#def.postSubject}}
                </div>
                <div>
                    <blockquote>{{ out += (post.text || ""); }}</blockquote>
                </div>
                {{? post.referringPosts.length > 0}}
                    <div>
                        {{#def.postReferringPosts}}
                    </div>
                {{?}}
            {{~}}
        </div>
    {{~}}
</div>
{{? !it.settings.stickyToolbar}}
    <hr />
    {{#def.navbar}}
{{?}}
<hr />
<div class="postingSpeedBar">
    <span class="navbarItem">[{{=it.tr.postingSpeedText}} {{=it.board.postingSpeed}}]</span>
</div>
<a id="bottom"></a>
{{? it.customFooter}}
    {{#def.customFooter}}
{{?}}
</body>
</html>
